[gd_scene load_steps=26 format=3 uid="uid://luullnf7r6q2"]

[ext_resource type="Texture2D" uid="uid://32emst0ctttf" path="res://assets/Tiny Swords/Factions/Knights/Troops/Warrior/Blue/Warrior_Blue.png" id="1_ykuyc"]
[ext_resource type="Texture2D" uid="uid://bylxapp1aec53" path="res://assets/Tiny Swords/UI/Buttons/Button_Blue_3Slides_Pressed.png" id="2_n6yub"]
[ext_resource type="Texture2D" uid="uid://k20k0rpc5f1l" path="res://assets/Tiny Swords/UI/Buttons/Button_Blue_3Slides.png" id="3_kqi2c"]

[sub_resource type="GDScript" id="GDScript_n3afd"]
script/source = "extends Control

@onready var my_health = %MyHealth
@onready var opponent_health = %OpponentHealth
@onready var button = $VBoxContainer/Button
@onready var button_2 = $VBoxContainer/Button2
@onready var button_3 = $VBoxContainer/Button3
@onready var my_hp: int = my_health.max_value
@onready var opponent_hp: int = opponent_health.max_value
@onready var my_health_label = %MyHealthLabel
@onready var opponent_health_label = %OpponentHealthLabel


# Called when the node enters the scene tree for the first time.
func _ready():
	my_health.value = my_health.max_value
	opponent_health.value = opponent_health.max_value
	button.pressed.connect(func():
		opponent_hp -= 50
	)
	button_2.pressed.connect(func():
		opponent_hp /= 2.0
	)
	button_3.pressed.connect(func():
		my_hp -= 50
	)

func _process(delta):
	my_health.value = move_toward(my_health.value, my_hp, delta * 50.0)
	opponent_health.value = move_toward(opponent_health.value, opponent_hp, delta * 50.0)
	my_health_label.text = str(my_hp)
	opponent_health_label.text = str(opponent_hp)
	
"

[sub_resource type="AtlasTexture" id="AtlasTexture_dia6y"]
atlas = ExtResource("1_ykuyc")
region = Rect2(0, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_77mto"]
atlas = ExtResource("1_ykuyc")
region = Rect2(192, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_8rgk0"]
atlas = ExtResource("1_ykuyc")
region = Rect2(384, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_f6iat"]
atlas = ExtResource("1_ykuyc")
region = Rect2(576, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_0kl27"]
atlas = ExtResource("1_ykuyc")
region = Rect2(768, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_f23nk"]
atlas = ExtResource("1_ykuyc")
region = Rect2(960, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_c4lus"]
atlas = ExtResource("1_ykuyc")
region = Rect2(0, 192, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_r4ntx"]
atlas = ExtResource("1_ykuyc")
region = Rect2(192, 192, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_obgy0"]
atlas = ExtResource("1_ykuyc")
region = Rect2(384, 192, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_s3pq2"]
atlas = ExtResource("1_ykuyc")
region = Rect2(576, 192, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_h7eid"]
atlas = ExtResource("1_ykuyc")
region = Rect2(768, 192, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_bbl3k"]
atlas = ExtResource("1_ykuyc")
region = Rect2(960, 192, 192, 192)

[sub_resource type="SpriteFrames" id="SpriteFrames_7qjlr"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dia6y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_77mto")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8rgk0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f6iat")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0kl27")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f23nk")
}],
"loop": true,
"name": &"idle",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_c4lus")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r4ntx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_obgy0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s3pq2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h7eid")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bbl3k")
}],
"loop": true,
"name": &"running",
"speed": 12.0
}]

[sub_resource type="GDScript" id="GDScript_qobb3"]
script/source = "extends VBoxContainer


# Called when the node enters the scene tree for the first time.
func _ready():
	for child in get_children():
		child.pressed.connect(func(): self.reorder_children())
	
func reorder_children():
	get_children().map(func(child):
		move_child(child, randf_range(0, get_child_count() - 1))
		child.pop()
	)
"

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_c4456"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_f5f8n"]
texture = ExtResource("3_kqi2c")
texture_margin_left = 60.0
texture_margin_top = 10.0
texture_margin_right = 60.0
texture_margin_bottom = 30.0
expand_margin_left = 10.0
expand_margin_top = 10.0
expand_margin_right = 10.0
expand_margin_bottom = 10.0
axis_stretch_horizontal = 1
modulate_color = Color(0.643137, 0.490196, 1, 1)

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_ui1xv"]
content_margin_top = 20.0
texture = ExtResource("2_n6yub")
texture_margin_left = 60.0
texture_margin_top = 10.0
texture_margin_right = 60.0
texture_margin_bottom = 30.0
expand_margin_left = 10.0
expand_margin_top = 5.0
expand_margin_right = 10.0
expand_margin_bottom = 10.0
axis_stretch_horizontal = 1

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_vr6fr"]
texture = ExtResource("3_kqi2c")
texture_margin_left = 60.0
texture_margin_top = 10.0
texture_margin_right = 60.0
texture_margin_bottom = 30.0
expand_margin_left = 10.0
expand_margin_top = 10.0
expand_margin_right = 10.0
expand_margin_bottom = 10.0
axis_stretch_horizontal = 1

[sub_resource type="GDScript" id="GDScript_efclx"]
script/source = "extends Button

@export var text_label: RichTextLabel
@onready var text_label_pos = text_label.position

func _ready():
	pop()
	self_modulate = Color(randf(), randf(), randf(), 1.0)

func pop():
	create_tween().tween_property(
		self,
		\"scale:y\",
		1.0,
		0.2
	).from(0.0001).set_trans(Tween.TRANS_ELASTIC)

func _process(delta):
	if button_pressed:
		text_label.position = text_label_pos + Vector2(0, 7)
	else:
		text_label.position = text_label_pos
"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1m25k"]
bg_color = Color(0.689715, 0, 0.267726, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_n18g8"]
bg_color = Color(0, 1, 0.231373, 1)

[node name="CombatScene" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_n3afd")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
position = Vector2(257, 534)
scale = Vector2(2.35938, 2.35938)
sprite_frames = SubResource("SpriteFrames_7qjlr")
animation = &"idle"
autoplay = "idle"

[node name="AnimatedSprite2D2" type="AnimatedSprite2D" parent="."]
unique_name_in_owner = true
position = Vector2(1033, 527)
scale = Vector2(2.35938, 2.35938)
sprite_frames = SubResource("SpriteFrames_7qjlr")
animation = &"idle"
autoplay = "idle"
flip_h = true

[node name="VBoxContainer" type="VBoxContainer" parent="."]
layout_mode = 0
offset_left = 32.0
offset_top = 55.0
offset_right = 599.0
offset_bottom = 316.0
theme_override_constants/separation = 25
script = SubResource("GDScript_qobb3")

[node name="Button" type="Button" parent="VBoxContainer" node_paths=PackedStringArray("text_label")]
layout_mode = 2
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_styles/focus = SubResource("StyleBoxEmpty_c4456")
theme_override_styles/hover = SubResource("StyleBoxTexture_f5f8n")
theme_override_styles/pressed = SubResource("StyleBoxTexture_ui1xv")
theme_override_styles/normal = SubResource("StyleBoxTexture_vr6fr")
text = "
"
script = SubResource("GDScript_efclx")
text_label = NodePath("RichTextLabel")

[node name="RichTextLabel" type="RichTextLabel" parent="VBoxContainer/Button"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -2.0
offset_top = 9.0
offset_right = -2.0
offset_bottom = 9.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
bbcode_enabled = true
text = "[center][color=white][center]Reduce [u]enemy[/u]'s [color=red]health[/color] [b]by fifty[/b]"

[node name="Button2" type="Button" parent="VBoxContainer" node_paths=PackedStringArray("text_label")]
layout_mode = 2
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_styles/focus = SubResource("StyleBoxEmpty_c4456")
theme_override_styles/hover = SubResource("StyleBoxTexture_f5f8n")
theme_override_styles/pressed = SubResource("StyleBoxTexture_ui1xv")
theme_override_styles/normal = SubResource("StyleBoxTexture_vr6fr")
text = "
"
script = SubResource("GDScript_efclx")
text_label = NodePath("RichTextLabel")

[node name="RichTextLabel" type="RichTextLabel" parent="VBoxContainer/Button2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 2.0
offset_top = 9.0
offset_right = 2.0
offset_bottom = 9.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
bbcode_enabled = true
text = "[center][color=white][center]Reduce [u]enemy[/u]'s [color=red]health[/color] [b]by half[/b][/center]"

[node name="Button3" type="Button" parent="VBoxContainer" node_paths=PackedStringArray("text_label")]
layout_mode = 2
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_styles/focus = SubResource("StyleBoxEmpty_c4456")
theme_override_styles/hover = SubResource("StyleBoxTexture_f5f8n")
theme_override_styles/pressed = SubResource("StyleBoxTexture_ui1xv")
theme_override_styles/normal = SubResource("StyleBoxTexture_vr6fr")
text = "
"
script = SubResource("GDScript_efclx")
text_label = NodePath("RichTextLabel")

[node name="RichTextLabel" type="RichTextLabel" parent="VBoxContainer/Button3"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 2.0
offset_top = 13.0
offset_right = -12.0
offset_bottom = 11.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_colors/default_color = Color(0, 0, 0, 1)
bbcode_enabled = true
text = "[center][color=white]Reduce [u]player[/u]'s [color=red]health[/color] [b]by fifty[/b][/color]"

[node name="MyHealth" type="ProgressBar" parent="."]
unique_name_in_owner = true
layout_mode = 0
offset_left = 60.0
offset_top = 643.0
offset_right = 563.0
offset_bottom = 670.0
theme_override_styles/background = SubResource("StyleBoxFlat_1m25k")
theme_override_styles/fill = SubResource("StyleBoxFlat_n18g8")
value = 70.0
show_percentage = false

[node name="MyHealthLabel" type="RichTextLabel" parent="MyHealth"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 190.0
offset_top = 33.0
offset_right = 230.0
offset_bottom = 73.0

[node name="OpponentHealth" type="ProgressBar" parent="."]
unique_name_in_owner = true
layout_mode = 0
offset_left = 726.0
offset_top = 643.0
offset_right = 1229.0
offset_bottom = 670.0
theme_override_styles/background = SubResource("StyleBoxFlat_1m25k")
theme_override_styles/fill = SubResource("StyleBoxFlat_n18g8")
value = 70.0
show_percentage = false

[node name="OpponentHealthLabel" type="RichTextLabel" parent="OpponentHealth"]
unique_name_in_owner = true
layout_mode = 0
offset_left = 251.0
offset_top = 33.0
offset_right = 291.0
offset_bottom = 73.0
